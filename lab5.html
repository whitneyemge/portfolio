<!--
	Story by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
	Fullscreen plugin source: https://github.com/Leaflet/Leaflet.fullscreen
	Draw plugin source: https://github.com/Leaflet/Leaflet.draw/tree/develop/docs
-->
<!DOCTYPE html>
<html>
	<head>
		<title>WA Public Lands</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="assets/css/main.css" />

    <link rel="stylesheet" href="leaflet/leaflet.css"/>
		<script src="leaflet/leaflet.js"></script>
		<script src="assets/js/jquery-3.4.1.min.js"></script>
		<link rel="stylesheet" href="dist/leaflet.fullscreen.css"/>
		<script src="dist/Leaflet.fullscreen.js"></script>

		<link rel="stylesheet" href="leaflet/src/leaflet.draw.css"/>

	     <script src="leaflet/leaflet-src.js"></script>

	     <script src="leaflet/src/Leaflet.draw.js"></script>
	     <script src="leaflet/src/Leaflet.Draw.Event.js"></script>

	     <script src="leaflet/src/edit/handler/Edit.Poly.js"></script>
	     <script src="leaflet/src/edit/handler/Edit.SimpleShape.js"></script>
	     <script src="leaflet/src/edit/handler/Edit.Rectangle.js"></script>
	     <script src="leaflet/src/edit/handler/Edit.Marker.js"></script>
	   	<script src="leaflet/src/edit/handler/Edit.CircleMarker.js"></script>
	   	<script src="leaflet/src/edit/handler/Edit.Circle.js"></script>

	     <script src="leaflet/src/draw/handler/Draw.Feature.js"></script>
	     <script src="leaflet/src/draw/handler/Draw.Polyline.js"></script>
	     <script src="leaflet/src/draw/handler/Draw.Polygon.js"></script>
	     <script src="leaflet/src/draw/handler/Draw.SimpleShape.js"></script>
	     <script src="leaflet/src/draw/handler/Draw.Rectangle.js"></script>
	     <script src="leaflet/src/draw/handler/Draw.Circle.js"></script>
	     <script src="leaflet/src/draw/handler/Draw.Marker.js"></script>
	     <script src="leaflet/src/draw/handler/Draw.CircleMarker.js"></script>

	     <script src="leaflet/src/ext/TouchEvents.js"></script>
	     <script src="leaflet/src/ext/LatLngUtil.js"></script>
	     <script src="leaflet/src/ext/GeometryUtil.js"></script>
	     <script src="leaflet/src/ext/LineUtil.Intersect.js"></script>
	     <script src="leaflet/src/ext/Polyline.Intersect.js"></script>
	     <script src="leaflet/src/ext/Polygon.Intersect.js"></script>

	     <script src="leaflet/src/Control.Draw.js"></script>
	     <script src="leaflet/src/Tooltip.js"></script>
	     <script src="leaflet/src/Toolbar.js"></script>

	     <script src="leaflet/src/draw/DrawToolbar.js"></script>
	     <script src="leaflet/src/edit/EditToolbar.js"></script>
	     <script src="leaflet/src/edit/handler/EditToolbar.Edit.js"></script>
	     <script src="leaflet/src/edit/handler/EditToolbar.Delete.js"></script>

		<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDUUesWC4WFt3IXWafrVz7u2J9Eheke9Ys&callback=initMap"></script>
<style>
	#map {
		height: 75vh;
	}
	</style>
	</head>
	<body>

	<!-- Title and info -->
		<section class="wrapper style1 align-center">
			<div class="inner">
				<h2>HEADER</h2>
				<p>This map shows...</p>

	<!-- Leaflet map -->

    <div id="mapid" style='height: 75vh;'></div>

      <script>
        var mymap = L.map('mapid').setView([47.598194, -120.683628], 7);
				L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
          attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
          maxZoom: 18,
          id: 'mapbox.outdoors',
          accessToken: 'pk.eyJ1IjoiZW1nZXciLCJhIjoiY2sybzlheDB4MDJrdDNwbXp1OXVmN3dseCJ9.ukmQwSpvGDqj0hChY4ZUyQ'
				}).addTo(mymap);

				//Add polygon data
				var landowner = null;

				$.getJSON("assets/geojson/MPL.geojson",function(data){
					landowner = L.geoJson (data);
					geojson = L.geoJson(data,{
									style: function(feature){
										var polyColor,
											owner = feature.properties.OWNER;
												if (owner === "City or Municipal Government") polyColor = "#F1800F";
												else if (owner === "Federal Government") polyColor = "#2980b9";
												else if (owner === "State Government") polyColor = "#8E0FF1";
												else if (owner === "County Government") polyColor = "#F10F46";
											return {color: "#ffffff", weight: 0.3, fillColor: polyColor, fillOpacity: 0.7};
									},
									onEachFeature: function (feature, layer) {
										layer.bindPopup("Owner: " + feature.properties.OWNER + "<br>Manager: " + feature.properties.MANAGER + "<br>Management Type: " + feature.properties.MANAGEMENT_TYPE);
										layer.on({
											mouseover: highlightFeature,
											mouseout: resetHighlight
										})
									}
				 				}).addTo(mymap);

					//Add DNR lands polygon data
					// var dnrLand = null;
					//
					// $.getJSON("assets/geojson/snoqualmiednrlands.geojson",function(data){
					// 	dnrLand = L.geoJson (data);
					// 	geojson = L.geoJson(data,{
					// 		style: function (feature) {
					// 			return {color: "#ffffff", weight: 0.3, fillColor: "#3df312", fillOpacity: 0.8};
					// 		},
					// 		onEachFeature: function (feature, layer) {
					// 			layer.bindPopup("Owner: WA State Dept. of Natural Resources" + "<br>Parcel Type: " + feature.properties.PARCEL_TYPE_CD + "<br>Surface Rights: " + feature.properties.SURFACE_RIGHTS_FLG + "<br>Mineral Rights: " + feature.properties.MINERAL_TRUST_CD + "<br>Timber Rights: " + feature.properties.TIMBER_TRUST_CD);
					// 				layer.on({
					// 					mouseover: highlightFeature,
					// 					mouseout: resetHighlight
					// 				})
					// 		}
					// 	})
					// }).addTo(mymap);

									//Add feature highlight
									function highlightFeature(e) {
									    var layer = e.target;

												layer.setStyle({
									        weight: 0.4,
									        color: '#ffffff',
									        dashArray: '',
									        fillOpacity: 0.6
									    	});

									    if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
									        layer.bringToFront();
									    }
											info.update(layer.feature.properties);
										}

										var geojson;

									function resetHighlight(e) {
    								geojson.resetStyle(e.target);
										info.update();
									}
								});

//Add drawing plugin
							// 	var drawnItems = new L.FeatureGroup();
							// 		mymap.addLayer(drawnItems);
							//
							// 	var drawControl = new L.Control.Draw({
							// 			edit: {
							// 					featureGroup: drawnItems,
							// 			}
							// 	});
							// 	mymap.addControl(drawControl);
							//
							// 	mymap.on(L.Draw.Event.CREATED, function (e) {
							// 		var type = e.layerType,
							// 			layer = e.layer;
							//
							// 		if (type === 'marker') {
							// 			layer.bindPopup('A popup!');
							// 		}
							//
							// 		drawnItems.addLayer(layer);
							// 	});
							//
							// 	mymap.on(L.Draw.Event.EDITED, function (e) {
							// 		var layers = e.layers;
							// 		var countOfEditedLayers = 0;
							// 			layers.eachLayer(function (layer) {
							// 				countOfEditedLayers++;
							// 	});
							// 	console.log("Edited " + countOfEditedLayers + " layers");
							// });
							//
							// L.DomUtil.get('changeColor').onclick = function () {
							// 	drawControl.setDrawingOptions({rectangle: {shapeOptions: {color: '#004a80'}}});
							// };

      		</script>
</div>
</section>
<br>
<section class="wrapper style1 align-center">
	<div class="inner">
		<p>This map shows...</p>

		<div id='map'style='height: 75vh;'></div>
		<script>
			function initMap() {
			  var map = new google.maps.Map(document.getElementById('map'), {
			    center: {lat: -34.397, lng: 150.644},
			    zoom: 8
			  });

			  var drawingManager = new google.maps.drawing.DrawingManager({
			    drawingMode: google.maps.drawing.OverlayType.MARKER,
			    drawingControl: true,
			    drawingControlOptions: {
			      position: google.maps.ControlPosition.TOP_CENTER,
			      drawingModes: ['marker', 'circle', 'polygon', 'polyline', 'rectangle']
			    },
			    markerOptions: {icon: 'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png'},
			    circleOptions: {
			      fillColor: '#ffff00',
			      fillOpacity: 1,
			      strokeWeight: 5,
			      clickable: false,
			      editable: true,
			      zIndex: 1
			    }
			  });
			  drawingManager.setMap(map);
			}
	</script>
 </div>
</section>

<!-- Sources -->
				<section class="wrapper style1 align-center">
					<div class="inner">
						<h3>Data Sources</h3>
						<p><a href="http://geo.wa.gov/datasets/wadnr::wa-major-public-lands-non-dnr/data?geometry=-122.736%2C46.972%2C-118.828%2C47.624&orderBy=OWNER&orderByAsc=false" target="_blank">WA Major Public Lands (non-DNR)</a>
						<br><a href="" target="_blank">SOURCE</a></p>
					</div>
				</section>

<!-- Home Button -->
				<footer class="wrapper style1 align-center">
					<div class="inner">
						<ul class="actions stacked">
							<li><a href="https://whitneyemge.github.io/portfolio/" class="button">Back to Home</a></li>
						</ul>
					</div>
				</footer>

    </body>
  </html>
