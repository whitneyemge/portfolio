<!DOCTYPE HTML>
<!--
	Minimaxing by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Public Land Use Preferences</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />

		<!-- mapbox js -->
		<link href='https://api.tiles.mapbox.com/mapbox.js/v1.6.2/mapbox.css' rel='stylesheet' />
		<script src='https://api.tiles.mapbox.com/mapbox.js/v1.6.2/mapbox.js'></script>

	 <!-- leaflet draw library -->
	 <link rel='stylesheet' href='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-draw/v0.2.2/leaflet.draw.css' />
	 <script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-draw/v0.2.2/leaflet.draw.js'></script>

	 <!-- jquery -->
	 <link rel="stylesheet" href="https://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
	 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
	 <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>

	 <!-- bootstrap -->
	 <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	</head>

	<body>
		<div id="page-wrapper">

			<!-- Header -->
				<div id="header-wrapper">
					<div class="container">
						<div class="row">
							<div class="col-12">

								<header id="header">
									<h1>Land Use Preference Mapping</h1>
									<nav id="nav">
										<!-- <a href="index.html">Homepage</a>
										<a href="twocolumn1.html" class="current-page-item">Two Column #1</a>
										<a href="twocolumn2.html">Two Column #2</a>
										<a href="onecolumn.html">One Column</a>
										<a href="threecolumn.html">Three Column</a> -->
									</nav>
								</header>

							</div>
						</div>
					</div>
				</div>

			<!-- Main -->

			<div id="main">
				<div class="container">
					<div class="row main-row">
						<div class="col-12">

							<section>
								<h2>Instructions</h2>
								<p>The map below shows the Colville National Forest in Washington State. Click on either the line or polygon icons and draw shapes on the map to represent places where you prefer certain land use types. Once you draw a feature, click either the recreation, agriculture, or forestry button above the map to indicate which type of land use the polygon or line represents.</p>
							</section>

								<section>
									<h2>Map</h2>

									<!-- add map div -->
									<div id='map' style='height: 75vh;'></div>

									<script>

                  var map = L.map('map', {zoomControl: false}).setView([48.588, -117.870], 9);
                    L.tileLayer('https://api.mapbox.com/styles/v1/emgew/cka5l6m1s17cr1imz0gwap4ey/tiles/256/{z}/{x}/{y}@2x?access_token=pk.eyJ1IjoiZW1nZXciLCJhIjoiY2sybzlheDB4MDJrdDNwbXp1OXVmN3dseCJ9.ukmQwSpvGDqj0hChY4ZUyQ', {
                        attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
										}).addTo(map);

										L.control.zoom({
										    position: 'topright'
										}).addTo(map);

										// Create variable for Leaflet.draw features
										var drawnItems = L.featureGroup().addTo(map);
										map.addLayer(drawnItems);

										// Add Leaflet draw tools
										var drawControl = new L.Control.Draw({
											position: 'topright',
											draw: {
												polyline: false,
												marker: false
											},
												edit: {
													featureGroup: drawnItems
												}
										});
										map.addControl(drawControl);


										// popup form https://www.w3schools.com/html/html_form_elements.asp
										map.on('draw:created', function (e) {
											var type = e.layer.Type,
													layer = e.layer;
											var idiW = L.popup();
											var content = (
												'<form role="form" id="form">'+
													'<span><b>Land Use Type</b></span>' +
													'<br>' +
													'Select one' +
													'<br>' +
														'<select id="useType" name="useType">' +
															'<option value="recY">Recreation - Yes</option>' +
															'<option value="recN">Recreation - No</option>' +
															'<option value="timY">Timber Harvest - Yes</option>' +
															'<option value="timN">Timber Harvest - No</option>' +
														'</select>' +
													'<br>' +
													'<br>' +
													'<span><b>Values</b></span>' +
													'<br>' +
													'Press and hold the control key to select more than one value.' +
													'<br>' +
															'<select id="useValues" name="values" size ="4" multiple>' +
																'<option value="scenic">Scenic/aesthetic</option>' +
																'<option value="recreation">Recreation</option>' +
																'<option value="life">Life Sustaining</option>' +
																'<option value="educational">Learning/education/research</option>' +
																'<option value="conservation">Biological/conservation</option>' +
																'<option value="cultural">Cultural</option>' +
																'<option value="health">Therapeutic/health</option>' +
																'<option value="spiritual">Spiritual</option>' +
																'<option value="intrinsic">Intrinsic/existence</option>' +
																'<option value="identity">Identity</option>' +
																'<option value="economic">Economic</option>' +
																'<option value="wilderness">Wilderness/pristine</option>' +
														'</select>' +
													'<br>' +
													'<br>' +
													'<span><b>Comments</b></span>' +
													'<br>' +
														'<textarea id="useComments" cols="25" rows="5">' +
														'</textarea>' +
													'<br>' +
													'<br>' +
													'<input type="button" id="okBtn" value="Save" onclick="saveData()"/>'+
												'</form>'
												// layer.bindPopup(popupContent)
											);

										// Do whatever else you need to. (save to db, add to map etc)
										drawnItems.addLayer(layer);
										// map.addLayer(drawnItems);
										e.layer.bindPopup(content, {closeOnClick: false}).openPopup();
									});

									// Create popup variable https://gis.stackexchange.com/questions/159536/submit-form-information-from-a-leaflet-popup-to-mysql-table
									// var popupContent = L.popup()
									// .setLatLng(layer.getLatLng())
									// .setContent(
									// 	'<form role="form" id="form" onsubmit="save()">'</form>'
									// );

									// Add function for save button in popup
									function saveData() {
										// var uType = $('#useType').val(); //$ = "select all ___ elements"
										// var uVal = $('#useValues').val();
										var uComm = $('#useComments').val();
										var geometry = drawnItems.getLayers();
										// geometry[geometry.length - 1].title = uType;
										// geometry[geometry.length - 1].content = uVal;
										geometry[geometry.length - 1].content = uComm;

										// layer.changeColor();
											map.closePopup();
									};

									//https://gis.stackexchange.com/questions/232585/changing-data-and-style-with-select-in-leaflet-popup
									// function onEachFeature(feature, layer) {
									//
									//   var select = document.createElement('select'),
									//     option0 = document.createElement('option'),
									//     option1 = document.createElement('option'),
									//     option2 = document.createElement('option'),
									// 		option3 = document.createElement('option');
									//
									//   select.addEventListener('change', function() {
									//     restyleLayer(this.value, this.layer);
									//   });
									//
									//   select.layer = layer;
									//
									//   option0.value = 'Nope';
									//   option0.selected = true;
									//   option0.innerHTML = 'None';
									//
									//   option1.value = 'Democrat';
									//   option1.innerHTML = 'Democrat';
									//
									//   option2.value = 'Republican';
									//   option2.innerHTML = 'Republican';
									//
									//   select.appendChild(option0);
									//   select.appendChild(option1);
									//   select.appendChild(option2);
									// 	select.appendChild(option3);
									//
									//   layer.bindPopup(select);
									//
									// }
									//
									// var drawnItems = L.geoJSON(states, {
									//   style: function(feature) {
									//     return getColor(feature.properties.party)
									//   },
									//   onEachFeature: onEachFeature
									// }).addTo(map);
									//
									// function getColor(party) {
									//   console.log(party)
									//   switch (party) {
									//     case 'Republican':
									//       return {
									//         color: "red"
									//       };
									//     case 'Democrat':
									//       return {
									//         color: "blue"
									//       };
									//     case 'Nope':
									//       return {
									//         color: 'grey'
									//       };
									//   }
									// }
									//
									// function restyleLayer(party, layer) {
									//
									//   layer.feature.properties.party = party;
									//
									//   var myFillColor = getColor(party);
									//
									//   layer.setStyle(myFillColor);
									// }


									</script>
								</section>
							</div>

							<p>
							<a href="#" class="button">Submit</a>
							</p>

							</div>
						</div>
					</div>
				</div>

			<!-- Footer -->
				<div id="footer-wrapper">
					<div class="container">
						<div class="row">
							<div class="col-8 col-12-medium">

								<section>
									<h2>Data Sources</h2>
									<div>
										<div class="row">
											<div class="col-3 col-6-medium col-12-small">
												<ul class="link-list">
													<li><a href="https://data.fs.usda.gov/geodata/webapps/EDW_DataExtract/" target="_blank">USDA Forest Service</a></li>
													<li><a href="http://geo.wa.gov/datasets/wa-rco::wa-rco-trails-2017" target="_blank">WA State Recreation and Conservation Office</a></li>
												</ul>
											</div>

										</div>
									</div>
								</section>

							</div>

						</div>
						<div class="row">
							<div class="col-12">

								<div id="copyright">
									&copy; Untitled. All rights reserved. | Design: <a href="http://html5up.net">HTML5 UP</a>
								</div>

							</div>
						</div>
					</div>
				</div>

		</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

		<!-- Bootstrap Scripts -->
			<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
			<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


	</body>
</html>
