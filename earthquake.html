<!--
	Story by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>TITLE HERE</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="assets/css/main.css" />

    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.50.0/mapbox-gl.js'></script>
		<link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.50.0/mapbox-gl.css' rel='stylesheet' />

	 </head>
	<body>

	<!-- Title and info -->
		<section class="wrapper style1 align-center">
			<div class="inner">
				<h2>HEADER HERE</h2>
				<p>TEXT HERE</p>

	<!-- Leaflet map -->

    <div id="map"></div>

    <script>

      mapboxgl.accessToken = 'pk.eyJ1IjoiZW1nZXciLCJhIjoiY2sybzlheDB4MDJrdDNwbXp1OXVmN3dseCJ9.ukmQwSpvGDqj0hChY4ZUyQ';

      //The map variable, set initial style, center/zoom
      var map = new mapboxgl.Map({
          container: 'map',
          style: 'mapbox://styles/mapbox/streets-v9', // stylesheet location
          center: [-122, 47], // starting position [lng, lat]
          zoom: 9 // starting zoom
      });

      //on map load, run function to load the geojson
      map.on('load', function(){
        //add a source layer for earthquakes
        map.addSource('earthquakes', {
              "type": "geojson",
              "data": "https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/2.5_week.geojson"
          });
          //add the earthquakes to the map
          map.addLayer({
            "id":"equakes",
            "type":"circle",
            "source":"earthquakes"
          });
      });

      //add a handler for clicking/popups. 'click' is event listening for, 'equakes' is layer affected, function is the action it should do on the click
      //Thanks to: https://www.mapbox.com/mapbox-gl-js/example/popup-on-click/
      map.on('click', 'equakes', function (e) {
            //1. set the coordinates of the popup (doesn't display the coordinates in the popup), case-sensitive
            var coordinates = e.features[0].geometry.coordinates;
            //2. create the information that will display in the popup
            //var description = e.features[0].properties.mag;
            var description = "<h3>"+e.features[0].properties.title+"</h3>"+"<p>Magnitude: " + e.features[0].properties.mag + "<br>Status: " + e.features[0].properties.status + "<br> Tsunami: " + e.features[0].properties.tsunami + "</p>";
            //3. make the popup
            new mapboxgl.Popup()
                    .setLngLat(coordinates)
                    .setHTML(description)
                    .addTo(map);
      });

      </script>
		 </div>
		</section>

<!-- Sources -->
				<section class="wrapper style1 align-center">
					<div class="inner">
						<h3>Data Sources</h3>
						<p><a href="" target="_blank">TEXT HERE</a></p>
						<p><a href="" target="_blank">TEXT HERE</a></p>
					</div>
				</section>

<!-- Home Button -->
				<footer class="wrapper style1 align-center">
					<div class="inner">
						<ul class="actions stacked">
							<li><a href="https://whitneyemge.github.io/portfolio/" class="button">Back to Home</a></li>
						</ul>
					</div>
				</footer>

    </body>
  </html>
