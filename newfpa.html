<html>
	<head>
		<title>Forest Practice Applications and Trails</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="assets/css/main.css" />

    <link rel="stylesheet" href="leaflet/leaflet.css"/>
		<script src="leaflet/leaflet.js"></script>
		<script src="assets/js/jquery-3.4.1.min.js"></script>

	</head>
	<body>

		<!-- Title and info -->
		      <section class="wrapper style1 align-center">
								<div class="inner">
									<h2>Wildlife Crossing Structures in Washington</h2>
									<p>This map shows...</p>
								</div>
					</section>

		<!-- Leaflet map -->

    <div id="mapid"></div>

      <script>
        var mymap = L.map('mapid').setView([46.989211, -120.606391], 7);
        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
          attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
          maxZoom: 18,
          id: 'mapbox.outdoors',
          accessToken: 'pk.eyJ1IjoiZW1nZXciLCJhIjoiY2sybzlheDB4MDJrdDNwbXp1OXVmN3dseCJ9.ukmQwSpvGDqj0hChY4ZUyQ'
        }).addTo(mymap);

			//Add points data

			$.getJSON("assets/geojson/crossStruct.geojson",function(data){
			    L.geoJson(data,
						{onEachFeature: addPopup}
					).addTo(mymap);
				});

			//Popup function

			function addPopup (feature, layer){
				layer.bindPopup(feature.properties.Location_Name)
			}

			//Add lines data

			$.getJSON("assets/geojson/connPrior.geojson",function(connData){
				L.geoJson(connData,
					{onEachFeature: priorStyle}
				).addTo(mymap);
			});

			//Color function

			function priorStyle (feature) {
			  var colorToUse;
			  var line = feature.properties.SafetyRank;

			  if (line === "Low") colorToUse = "#f1c40f";
			  else if (line === "Med") colorToUse = "#e67e22";
			  else if (line === "High") colorToUse = "#c0392b";
			  else if (line === "None") colorToUse = "#616a6b";
			  else colorToUse = "#fdfefe";

			  return {
			    "color": colorToUse,
			    "weight": 5
			  };
			}

			// Create layer and add it to the map
				var priorLayer = L.geoJSON(connData, {
					style: priorStyle
		});

      </script>

			<!-- Home Button -->
			<footer class="wrapper style1 align-center">
				<div class="inner">
					<ul class="actions stacked">
						<li><a href="https://whitneyemge.github.io/portfolio/" class="button">Back to Home</a></li>
					</ul>
				</div>
			</footer>
			</div>

    </body>
  </html>
